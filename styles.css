/* -------------------------
   EcoTrack - styles.css
   Ultra Switch 2 layout
   ------------------------- */

:root{
  --bg-1:#04090a;
  --glass: rgba(255,255,255,0.04);
  --muted:#9aa9a0;
  --accent1:#34D399;
  --accent2:#9AE6B4;
  --card:#0b1211;
  --shadow: 0 8px 28px rgba(2,6,23,0.7);
  --radius:14px;
  --ui-scale:1;
}

/* reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";background:var(--bg-1);color:#eafaf0;overflow:hidden}

/* video background */
.bg-video{
  position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:-3;
  filter:brightness(0.42) contrast(1.12) saturate(0.95);
}
.bg-overlay{
  position:fixed;inset:0;z-index:-2;
  background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.85));
  pointer-events:none;
}

/* particles */
#particles{position:fixed;inset:0;z-index:-1;pointer-events:none}

/* boot animation */
#boot{position:fixed;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.85), rgba(0,0,0,0.95));display:grid;place-items:center;z-index:9999}
.boot-center{display:flex;flex-direction:column;align-items:center;gap:18px;transform:scale(1);opacity:1}
.boot-logo{font-size:36px;font-weight:800;color:var(--accent2);letter-spacing:1px}
.boot-sub{font-size:14px;color:var(--muted)}
.boot-loader{display:flex;gap:8px}
.boot-loader span{width:8px;height:8px;border-radius:50%;background:var(--accent2);opacity:0;animation:bootp 1.2s infinite}
.boot-loader span:nth-child(2){animation-delay:.14s}
.boot-loader span:nth-child(3){animation-delay:.28s}
@keyframes bootp{0%{transform:translateY(0);opacity:0}40%{transform:translateY(-10px);opacity:1}80%{transform:translateY(0);opacity:0}100%{opacity:0}}

/* shell hidden until boot done */
.hidden{display:none}

/* topbar */
.topbar{height:64px;padding:10px 22px;display:flex;align-items:center;justify-content:space-between;gap:12px;position:relative;z-index:5}
.brand-mini{font-weight:800;color:var(--accent2);letter-spacing:0.6px}
.status{font-weight:700;color:var(--muted)}
.buddy-avatar{font-size:24px}

/* main home area */
.home{height:calc(100vh - 64px);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:22px;gap:22px;z-index:4}

/* center grid of large tiles */
.center-grid{display:grid;grid-template-columns:repeat(3, 180px);grid-auto-rows:220px;gap:22px;align-items:center;justify-content:center}
.app-tile{
  width:180px;height:220px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;cursor:pointer;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow);transition:transform .18s, box-shadow .18s;
  overflow:hidden;
}
.app-tile img{width:92px;height:92px;object-fit:contain;flex-shrink:0}
.app-label{font-weight:800;color:var(--accent2);font-size:14px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;padding:0 6px;max-width:100%}
.app-tile:focus, .app-tile:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 18px 50px rgba(52,211,153,0.09)}

/* control strip */
.control-strip{display:flex;gap:12px;align-items:center;justify-content:center}
.ctrl{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;color:var(--muted);cursor:pointer;font-weight:700}
.ctrl:hover{background:rgba(154,230,180,0.03);color:var(--accent1)}

/* small score compact */
.score-compact{display:flex;align-items:center;gap:12px;padding:8px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));border:1px solid rgba(255,255,255,0.03)}
.ring-small{width:60px;height:60px;transform:rotate(-90deg)}
.ring-small .ring-bg{fill:none;stroke:rgba(255,255,255,0.03);stroke-width:10}
.ring-small .ring-fill{fill:none;stroke-width:10;stroke-linecap:round;stroke-dasharray:302;stroke-dashoffset:302;transition:stroke-dashoffset .9s}
.score-mini{font-weight:800;font-size:13px;line-height:1}
#carbonScore{font-size:13px}
#xpText{font-size:12px;color:var(--muted);font-weight:700}

/* modal */
.modal{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,0.45);z-index:50;opacity:0;pointer-events:none;transition:opacity .24s}
.modal[aria-hidden="false"]{opacity:1;pointer-events:auto}
.modal-panel{width:min(980px,92vw);max-height:82vh;overflow:auto;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:var(--shadow)}
.modal-close{position:absolute;right:20px;top:16px;background:transparent;border:none;color:var(--muted);font-size:18px;cursor:pointer}

/* missions inside modal */
.missions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:12px}
.mission-card{display:flex;align-items:center;padding:12px;border-radius:10px;background:var(--card);border:1px solid rgba(255,255,255,0.02);gap:12px}
.mission-left{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#0b3220,#08311a);display:grid;place-items:center;font-size:26px}
.mission-title{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}
.mission-desc{font-size:13px;color:var(--muted);margin-top:4px;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mission-right{margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;gap:6px}
.mission-reward{font-weight:800;color:var(--accent1)}
.btn-do{background:linear-gradient(90deg,var(--accent2),var(--accent1));border:none;color:#042018;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:800}

/* activity list */
.activity-list{list-style:none;padding:6px;display:flex;flex-direction:column;gap:8px}
.activity-list li{display:flex;justify-content:space-between;gap:8px;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02);font-weight:700;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* toast */
#toast{position:fixed;right:20px;top:20px;z-index:80}

/* confetti helper */
.confetti{position:fixed;pointer-events:none}

/* accessibility focus */
.app-tile:focus{outline:2px solid rgba(154,230,180,0.12);outline-offset:4px}

/* responsive */
@media (max-width:1100px){
  .center-grid{grid-template-columns:repeat(2, 42vw);grid-auto-rows:200px}
  .app-tile{width:42vw;height:200px}
}
@media (max-width:700px){
  .center-grid{grid-template-columns:repeat(1,60vw)}
  .app-tile{width:60vw;height:180px}
  .control-strip{flex-direction:column}
  .modal-panel{width:94vw}
}
