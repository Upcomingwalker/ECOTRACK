<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Calculator India</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<header class="header">
    <div class="container header-content">
        <h1>üáÆüá≥ Carbon Calculator India</h1>
        <button class="theme-toggle btn btn--secondary">
            <span class="theme-icon">üåô</span>
        </button>
    </div>
</header>

<main class="main container">

    <!-- Welcome Section -->
    <section class="dashboard">
        <div class="welcome-card card">
            <div class="card__body">
                <h2>Your Carbon Footprint</h2>
                <p>Calculate your annual CO‚ÇÇ emissions based on real Indian lifestyle data.</p>
                
                <div class="footprint-summary">
                    <div class="current-footprint">
                        <span class="footprint-value">0.0</span>
                        <span class="footprint-unit">tons CO‚ÇÇ/year</span>
                    </div>

                    <div class="comparison-bars">
                        <div class="comparison-item">
                            <span class="comparison-label">Your footprint</span>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="0"></div>
                            </div>
                            <span class="comparison-value">0.0</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">India Average</span>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="100"></div>
                            </div>
                            <span class="comparison-value">1.9</span>
                        </div>
                        <div class="comparison-item">
                            <span class="comparison-label">2050 Target</span>
                            <div class="progress-bar">
                                <div class="progress-fill target" data-progress="12.5"></div>
                            </div>
                            <span class="comparison-value">2.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Tabs -->
        <div class="category-nav">
            <button class="category-tab active" data-category="energy">üè† Home Energy</button>
            <button class="category-tab" data-category="transport">üöó Transportation</button>
            <button class="category-tab" data-category="waste">‚ôªÔ∏è Waste</button>
            <button class="category-tab" data-category="diet">üçΩÔ∏è Diet</button>
            <button class="category-tab" data-category="travel">‚úàÔ∏è Air Travel</button>
        </div>
    </section>

    <!-- INPUT SECTIONS -->

    <!-- ENERGY -->
    <section class="input-card card active" data-section="energy">
        <div class="card__body">
            <h3>üè† Home Energy</h3>
            <p>Electricity consumption + LPG cylinders</p>

            <div class="form-grid">

                <div class="form-group">
                    <label class="form-label">Monthly Electricity Bill (‚Çπ)</label>
                    <input type="number" class="form-control" id="electricity-bill" placeholder="1200">
                </div>

                <div class="form-group">
                    <label class="form-label">Electricity Source</label>
                    <select class="form-control" id="energy-source">
                        <option value="india_average">Indian Grid</option>
                        <option value="renewable">Renewable</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">LPG Cylinders per Month</label>
                    <input type="number" class="form-control" id="lpg-cylinders" placeholder="1">
                </div>

            </div>

            <div class="category-result">
                <span class="result-label">Energy Emissions:</span>
                <span class="result-value" id="energy-emissions">0.0 tons CO‚ÇÇ/year</span>
            </div>
        </div>
    </section>

    <!-- TRANSPORT -->
    <section class="input-card card" data-section="transport">
        <div class="card__body">
            <h3>üöó Transportation</h3>
            <div class="form-grid">

                <div class="form-group">
                    <label class="form-label">Annual Kilometers Driven</label>
                    <input type="number" id="km-driven" class="form-control" placeholder="12000">
                </div>

                <div class="form-group">
                    <label class="form-label">Vehicle Mileage (km/litre)</label>
                    <input type="number" id="vehicle-mileage" class="form-control" placeholder="18">
                </div>

                <div class="form-group">
                    <label class="form-label">Fuel Type</label>
                    <select class="form-control" id="fuel-type">
                        <option value="petrol">Petrol</option>
                        <option value="diesel">Diesel</option>
                        <option value="cng">CNG</option>
                        <option value="electric">Electric</option>
                    </select>
                </div>

            </div>

            <div class="category-result">
                <span class="result-label">Transport Emissions:</span>
                <span class="result-value" id="transport-emissions">0.0 tons CO‚ÇÇ/year</span>
            </div>

        </div>
    </section>

    <!-- WASTE -->
    <section class="input-card card" data-section="waste">
        <div class="card__body">
            <h3>‚ôªÔ∏è Waste</h3>
            <div class="form-grid">

                <div class="form-group">
                    <label class="form-label">Trash Bags per Week</label>
                    <input type="number" id="trash-bags" class="form-control" placeholder="3">
                </div>

                <div class="form-group">
                    <label class="form-label">Recycling Level</label>
                    <select class="form-control" id="recycling-level">
                        <option value="0">None</option>
                        <option value="0.3">Some</option>
                        <option value="0.7">Most</option>
                        <option value="1">Everything</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Composting</label>
                    <select class="form-control" id="composting">
                        <option value="0">No</option>
                        <option value="0.5">Some</option>
                        <option value="1">Everything</option>
                    </select>
                </div>

            </div>

            <div class="category-result">
                <span class="result-label">Waste Emissions:</span>
                <span class="result-value" id="waste-emissions">0.0 tons CO‚ÇÇ/year</span>
            </div>
        </div>
    </section>

    <!-- DIET -->
    <section class="input-card card" data-section="diet">
        <div class="card__body">
            <h3>üçΩÔ∏è Diet</h3>

            <div class="form-grid">

                <div class="form-group">
                    <label class="form-label">Rice Meals per Week</label>
                    <input type="number" id="rice-meals" class="form-control" placeholder="7">
                </div>

                <div class="form-group">
                    <label class="form-label">Wheat/Roti Meals per Week</label>
                    <input type="number" id="wheat-meals" class="form-control" placeholder="10">
                </div>

                <div class="form-group">
                    <label class="form-label">Milk (cups per day)</label>
                    <input type="number" id="milk-servings" class="form-control" placeholder="2">
                </div>

                <div class="form-group">
                    <label class="form-label">Chicken Meals per Week</label>
                    <input type="number" id="chicken-meals" class="form-control" placeholder="3">
                </div>

                <div class="form-group">
                    <label class="form-label">Vegetarian Meals per Week</label>
                    <input type="number" id="veg-meals" class="form-control" placeholder="10">
                </div>

            </div>

            <div class="category-result">
                <span class="result-label">Diet Emissions:</span>
                <span class="result-value" id="diet-emissions">0.0 tons CO‚ÇÇ/year</span>
            </div>
        </div>
    </section>

    <!-- TRAVEL -->
    <section class="input-card card" data-section="travel">
        <div class="card__body">
            <h3>‚úàÔ∏è Air Travel (India)</h3>

            <div class="form-grid">

                <div class="form-group">
                    <label class="form-label">Domestic Short Flights (under 1000 km)</label>
                    <input type="number" id="short-flights" class="form-control" placeholder="2">
                </div>

                <div class="form-group">
                    <label class="form-label">Domestic Long Flights (over 1000 km)</label>
                    <input type="number" id="long-flights" class="form-control" placeholder="1">
                </div>

                <div class="form-group">
                    <label class="form-label">International Flights</label>
                    <input type="number" id="international-flights" class="form-control" placeholder="0">
                </div>

            </div>

            <div class="category-result">
                <span class="result-label">Travel Emissions:</span>
                <span class="result-value" id="travel-emissions">0.0 tons CO‚ÇÇ/year</span>
            </div>

        </div>
    </section>

    <!-- RESULTS -->
    <section class="results-section">
        <div class="results-card card">
            <div class="card__body">
                <h3>Your Carbon Footprint</h3>

                <div class="results-grid">

                    <div class="total-footprint">
                        <span class="total-number" id="total-footprint">0.0</span>
                        <span class="total-unit">tons/year</span>
                        <div class="total-status" id="footprint-status">
                            Enter data to calculate your impact
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="footprint-chart"></canvas>
                    </div>

                </div>
            </div>
        </div>
    </section>

</main>


<script>

// INDIA CARBON FACTORS
class CarbonCalculator {
    constructor() {

        this.carbonFactors = {

            electricity: {
                india_average: 0.82, 
                renewable: 0
            },

            lpg: {
                cylinder_kg: 14.2,
                emission_factor: 2.98 
            },

            transportation: {
                petrol: 2.33,
                diesel: 2.68,
                cng: 2.75,
                electric: 0.82
            },

            waste: {
                landfill: 0.45,
                recycling: -0.3,
                compost: -0.2
            },

            diet: {
                rice: 4,
                wheat: 1.3,
                dairy: 1.1,
                chicken: 6.9,
                vegetarian_base: 1.7
            },

            flights: {
                domestic_short: 0.161,
                domestic_long: 0.139,
                international: 0.195
            }
        };

        this.globalAverages = {
            india_footprint: 1.9,
            global_average: 4,
            target_2050: 2
        };

        this.emissions = {
            energy: 0, transport: 0, waste: 0, diet: 0, travel: 0
        };

        this.init();
    }

    init() {
        this.setupEventListeners();
        this.setupChart();
        this.calculate();
    }

    setupEventListeners() {
        document.querySelectorAll('.form-control')
            .forEach(input => input.addEventListener('input', () => {
                this.calculate();
            }));

        document.querySelectorAll('.category-tab')
            .forEach(tab => tab.addEventListener('click', () => {
                document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                const category = tab.dataset.category;
                document.querySelectorAll('.input-card').forEach(card => {
                    card.classList.remove('active');
                    if (card.dataset.section === category) card.classList.add('active');
                });
            }));

        document.querySelector('.theme-toggle').addEventListener('click', () => {
            document.body.toggleAttribute('data-theme-dark');
        });
    }

    calculate() {

        // ENERGY
        const bill = this.val('electricity-bill');
        const kWhEstimate = (bill / 8) * 12; 
        const factor = this.sel('energy-source');

        const electricityCO2 = (kWhEstimate * this.carbonFactors.electricity[factor]) / 1000;

        const lpg = this.val('lpg-cylinders');
        const lpgCO2 = lpg * 12 * this.carbonFactors.lpg.cylinder_kg * this.carbonFactors.lpg.emission_factor / 1000;

        this.emissions.energy = electricityCO2 + lpgCO2;

        // TRANSPORT
        const km = this.val('km-driven');
        const mileage = this.val('vehicle-mileage');
        const fuel = this.sel('fuel-type');

        let transportCO2 = 0;

        if (fuel === 'electric') {
            transportCO2 = (km / 100) * 15 * this.carbonFactors.transportation.electric / 1000;
        } else if (mileage > 0) {
            const litres = km / mileage;
            transportCO2 = (litres * this.carbonFactors.transportation[fuel]) / 1000;
        }

        this.emissions.transport = transportCO2;

        // WASTE
        const trash = this.val('trash-bags');
        const recycle = parseFloat(this.sel('recycling-level'));
        const compost = parseFloat(this.sel('composting'));

        this.emissions.waste =
            trash * 52 * this.carbonFactors.waste.landfill / 1000 +
            recycle * this.carbonFactors.waste.recycling +
            compost * this.carbonFactors.waste.compost;

        // DIET
        const rice = this.val('rice-meals');
        const wheat = this.val('wheat-meals');
        const dairy = this.val('milk-servings');
        const chicken = this.val('chicken-meals');
        const veg = this.val('veg-meals');

        this.emissions.diet =
            rice * 52 * 0.25 * this.carbonFactors.diet.rice / 1000 +
            wheat * 52 * 0.25 * this.carbonFactors.diet.wheat / 1000 +
            dairy * 365 * 0.25 * this.carbonFactors.diet.dairy / 1000 +
            chicken * 52 * 0.25 * this.carbonFactors.diet.chicken / 1000 +
            veg * 52 * 0.25 * this.carbonFactors.diet.vegetarian_base / 1000;

        // TRAVEL
        const s = this.val('short-flights');
        const l = this.val('long-flights');
        const i = this.val('international-flights');

        this.emissions.travel =
            (s * 500 * this.carbonFactors.flights.domestic_short) / 1000 +
            (l * 1500 * this.carbonFactors.flights.domestic_long) / 1000 +
            (i * 4000 * this.carbonFactors.flights.international) / 1000;

        this.updateUI();
    }

    updateUI() {
        const total = Object.values(this.emissions).reduce((a, b) => a + b, 0);

        document.querySelector('.footprint-value').textContent = total.toFixed(1);
        document.getElementById('total-footprint').textContent = total.toFixed(1);

        // Category results
        document.getElementById('energy-emissions').textContent = this.emissions.energy.toFixed(1) + " tons CO‚ÇÇ/year";
        document.getElementById('transport-emissions').textContent = this.emissions.transport.toFixed(1) + " tons CO‚ÇÇ/year";
        document.getElementById('waste-emissions').textContent = this.emissions.waste.toFixed(1) + " tons CO‚ÇÇ/year";
        document.getElementById('diet-emissions').textContent = this.emissions.diet.toFixed(1) + " tons CO‚ÇÇ/year";
        document.getElementById('travel-emissions').textContent = this.emissions.travel.toFixed(1) + " tons CO‚ÇÇ/year";

        // Status text
        const status = document.getElementById('footprint-status');

        if (total === 0) status.textContent = "Enter data to calculate your impact";
        else if (total <= this.globalAverages.target_2050) status.textContent = "üåü Excellent! Below 2050 target";
        else if (total <= this.globalAverages.india_footprint) status.textContent = "üëç Better than Indian average";
        else if (total <= this.globalAverages.global_average) status.textContent = "‚ö†Ô∏è Above Indian average";
        else status.textContent = "üî¥ Very high emissions";

        // Update chart
        this.chart.data.datasets[0].data = [
            this.emissions.energy,
            this.emissions.transport,
            this.emissions.waste,
            this.emissions.diet,
            this.emissions.travel
        ];
        this.chart.update();
    }

    val(id) { return parseFloat(document.getElementById(id)?.value || 0); }
    sel(id) { return document.getElementById(id)?.value || ""; }

    setupChart() {
        const ctx = document.getElementById('footprint-chart');

        this.chart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Energy', 'Transport', 'Waste', 'Diet', 'Air Travel'],
                datasets: [{
                    data: [0, 0, 0, 0, 0],
                    backgroundColor: ['#1FB8CD', '#FFC185', '#B4413C', '#ECEBD5', '#5D878F'],
                    borderWidth: 0
                }]
            },
            options: { responsive: true }
        });
    }
}

const calculator = new CarbonCalculator();

</script>

</body>
</html>
